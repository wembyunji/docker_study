### (1) 도커 볼륨에 대한 궁금증

디자인실 도커 서버에서, 실행중이던 레노빗 컨테이너를 삭제했다가 다시 컨테이너를 띄었을 때! 그 전 컨테이너를 지웠음에도 불구하고 전에 있던 모든 레노빗 데이터들이 남아있는 것을 확인하였다. 어떻게 그럴 수 있을까?

---

### (2) 볼륨에 대한 이해

- 도커 볼륨이란
    - Docker 컨테이너와 호스트 시스템 간에 데이터를 지속적으로 저장하고 공유하기 위한 메커니즘.
    - 볼륨은 컨테이너가 삭제되거나 재시작될 때 데이터를 유지하며, 여러 컨테이너 간에도 데이터를 공유할 수 있다.
    - 이러한 특성 덕분에, 볼륨은 설정 파일, 데이터베이스 파일, 코드 또는 어떤 형태의 데이터든 영구적으로 저장하는 데 유용하다.

### (3) 볼륨의 특징

- 데이터 지속성: 컨테이너가 삭제되어도 볼륨에 저장된 데이터는 보존됩니다. 이를 통해 중요한 데이터를 안전하게 보관할 수 있습니다.
- 데이터 공유: 볼륨은 여러 컨테이너 간에 공유될 수 있어, 다양한 애플리케이션 또는 인스턴스에서 같은 데이터에 접근할 수 있게 해 줍니다.
- 효율적인 데이터 관리: 볼륨을 사용하면 컨테이너의 데이터를 호스트 시스템의 파일 시스템에서 관리할 수 있어, 백업, 마이그레이션, 검사 등의 작업이 용이합니다.

### (4) 볼륨의 종류

1. 볼륨(Volumes): Docker가 관리하는 호스트 파일 시스템의 일부입니다. 가장 일반적으로 사용되며, 다른 호스트 시스템과 독립적으로 작동합니다. Docker CLI나 Docker Compose 파일을
   통해 생성하고 관리할 수 있습니다.
2. 바인드 마운트(Bind Mounts): 호스트 시스템의 어떤 파일이나 디렉토리를 컨테이너에 마운트합니다. 이 방법은 개발 환경에서 소스 코드와 같은 데이터를 컨테이너에 쉽게 공유할 때 유용합니다.
3. tmpfs 마운트(tmpfs Mounts): 호스트의 메모리에만 데이터를 저장하는 마운트로, 컨테이너에 임시 데이터를 저장하는 데 사용됩니다. 이 데이터는 컨테이너가 종료되면 사라집니다.

### (5) 볼륨 관리

Docker 볼륨은 `docker volume` CLI 명령을 사용하여 생성, 삭제, 리스트업 등을 관리할 수 있습니다. 예를 들어, 모든 볼륨의 리스트를 보려면 `docker volume ls` 명령을 사용할 수
있습니다.

볼륨을 사용하면 데이터를 안전하게 관리하고 애플리케이션의 지속성을 보장할 수 있습니다.

### (6) 볼륨데이터의 위치

- Docker 볼륨 데이터는 컨테이너 외부에 있다
- 볼륨은 호스트 시스템의 파일시스템에 데이터를 저장하는 방식을 제공하며, 컨테이너와 분리되어 관리된다. 볼륨을 사용함으로써 데이터의 영구성을 보장하고, 여러 컨테이너 간에 데이터를 공유하거나, 컨테이너가
  삭제되더라도 데이터를 보존할 수 있다.
- 도커 컨테이너 내부에서 마치 로컬 파일시스템처럼 사용할 수 있지만, 실제 데이터는 Docker 호스트의 지정된 경로에 저장된다. 일반적으로 `var/lib/docker/volumes/` 쪽에 위치함. 컨테이너를
  삭제하더라도 이 볼륨 데이터는 호스트 시스템에 남아있어서 데이터의 영구성을 보장한다.

---

### (7) 볼륨 마운트랑 도커 볼륨의 차이

- 도커 볼륨 (Docker Volume)
    - 도커 호스트의 파일 시스템에 저장되는 특정 영역
    - 컨테이너와 독립적으로 존재
    - 이 볼륨은 Docker가 관리하며, 하나 이상의 컨테이너에 마운트하여 사용할 수 있다
    - 볼륨을 사용하면 컨테이너가 삭제되거나 재시작되어도 데이터가 유지된다
- 볼륨 마운트 (Volume Mount) - ***강의들으면서 더 파악 필요***
    - 호스트 시스템의 특정 디렉토리나 파일을 컨테이너의 파일 시스템 내부에 연결하는 것
    - 특정 경로에 직접 접근해야 할 때 사용되며, `bind mount`라고도 한다

---

### (8) 여러개의 컨테이너에서 하나의 볼륨 데이터 사용이 가능할까

- 사용이 가능함
    - Docker에서는 여러 컨테이너가 하나의 볼륨을 공유하여 사용할 수 있다
    - 여러 컨테이너 간에 데이터를 공유하거나, 데이터의 영구적인 저장과 접근이 가능
- 볼륨 공유 방법
    - 볼륨을 여러 컨테이너가 공유하게 하려면, 해당 볼륨을 공유하려는 모든 컨테이너에 마운트해야한다.각 컨테이너의 실행(`docker run`) 명령에 볼륨을 마운트하는 옵션을 지정하면 됩니다.
- 예시)
- `my-volume`이라는 이름의 볼륨을 두 개의 컨테이너가 공유하도록 설정 가능

```shell
docker run -d --name container1 -v my-volume:/app/data my-image
docker run -d --name container2 -v my-volume:/app/data my-image
```

- 위 예시에서는 `my-volume`이라는 볼륨이 두 컨테이너에 `/app/data`라는 경로로 마운트된다. 이렇게 하면, `container1`과 `container2` 모두 같은 볼륨에 접근하여 데이터를 읽고
  쓸 수 있다
- 주의사항
    - **데이터 무결성**: 여러 컨테이너가 동시에 하나의 볼륨에 쓰기 작업을 수행할 경우, 데이터 무결성에 문제가 발생 가능. 가능하다면 한 번에 하나의 컨테이너만이 데이터를 변경하도록 설계하는 것이 좋다
    - **볼륨 드라이버**: Docker 볼륨은 다양한 볼륨 드라이버를 지원. 필요에 따라 로컬 파일 시스템, 클라우드 스토리지 등 다양한 저장소 옵션을 선택
    - **권한 관리**: 볼륨에 저장된 데이터에 대한 접근 권한 관리 중요. 컨테이너에서 사용하는 사용자에 따라 적절한 파일 권한 설정이 필요

---

### (9) 볼륨 지정없이 즉 볼륨 없이도 컨테이너에 데이터 저장이 가능할까

- 예를들어 postgresql에 볼륨 지정하는 부분들이 있는데 만약 볼륨 지정 안하면 어디에 데이터가 저장되는걸까? 이러한 방식이 가능한걸까?
- 왜냐면 볼륨말고 다른데에 저장하고 싶을 수도 있으니까
    - 데이터는 저장된다. 그렇지만 컨테이너 안에서만 저장되기 때문에 컨테이너를 제거하면 그대로 데이터는 모두 날아간다. 즉, 컨테이너의 생명주기와 직접적으로 연결된다.
    - 데이터의 영속성을 보장하기 위해서는, 일반적으로 Docker 볼륨이나 바인드 마운트를 사용하는 것이 권장된다고 한다. 이러한 방법을 사용하면 컨테이너가 삭제되어도 데이터는 보존되어, 데이터의 안전성을 높일
      수 있다.
    - 다른 서비스의 db와 연결하여 사용도 가능